"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}();!function(){var e=function(){function e(t){var a=this;_classCallCheck(this,e);var s={logo:"OwO表情",container:document.getElementsByClassName("OwO")[0],target:document.getElementsByTagName("textarea")[0],position:"down",width:"100%",maxHeight:"250px",api:"https://api.anotherhome.net/data/OwO.json"};for(var n in s)s.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=s[n]);this.container=t.container,this.target=t.target,"up"===t.position&&this.container.classList.add("OwO-up");var i=new XMLHttpRequest;i.onreadystatechange=function(){4===i.readyState&&(i.status>=200&&i.status<300||304===i.status?(a.odata=JSON.parse(i.responseText),a.init(t)):console.log("OwO data request was unsuccessful: "+i.status))},i.open("get",t.api,!0),i.send(null)}return _createClass(e,[{key:"init",value:function(e){var t=this;this.area=e.target,this.packages=Object.keys(this.odata);for(var a='\n            <div class="OwO-logo"><span>'+e.logo+'</span></div>\n            <div class="OwO-body" style="width: '+e.width+'">',s=0;s<this.packages.length;s++){a+='\n                <ul class="OwO-items OwO-items-'+this.odata[this.packages[s]].type+'" style="max-height: '+(parseInt(e.maxHeight)-53)+'px;">';for(var n=this.odata[this.packages[s]].container,i=0;i<n.length;i++)a+='\n                    <li class="OwO-item" title="'+n[i].text+'">'+n[i].icon+"</li>";a+="\n                </ul>"}a+='\n                <div class="OwO-bar">\n                    <ul class="OwO-packages">';for(var o=0;o<this.packages.length;o++)a+="\n                        <li><span>"+this.packages[o]+"</span></li>";a+="\n                    </ul>\n                </div>\n            </div>\n            ",this.container.innerHTML=a,this.logo=this.container.getElementsByClassName("OwO-logo")[0],this.logo.addEventListener("click",function(){t.toggle()}),this.container.getElementsByClassName("OwO-body")[0].addEventListener("click",function(e){var a=null;if(e.target.classList.contains("OwO-item")?a=e.target:e.target.parentNode.classList.contains("OwO-item")&&(a=e.target.parentNode),a){var s=t.area.selectionEnd,n=t.area.value;t.area.value=n.slice(0,s)+a.innerHTML+n.slice(s),t.area.focus(),t.toggle()}}),this.packagesEle=this.container.getElementsByClassName("OwO-packages")[0];for(var c=0;c<this.packagesEle.children.length;c++)!function(e){!function(a){t.packagesEle.children[e].addEventListener("click",function(){t.tab(a)})}(e)}(c);this.tab(0)}},{key:"toggle",value:function(){this.container.classList.contains("OwO-open")?this.container.classList.remove("OwO-open"):this.container.classList.add("OwO-open")}},{key:"tab",value:function(e){var t=this.container.getElementsByClassName("OwO-items-show")[0];t&&t.classList.remove("OwO-items-show"),this.container.getElementsByClassName("OwO-items")[e].classList.add("OwO-items-show");var a=this.container.getElementsByClassName("OwO-package-active")[0];a&&a.classList.remove("OwO-package-active"),this.packagesEle.getElementsByTagName("li")[e].classList.add("OwO-package-active")}}]),e}();"undefined"!=typeof module&&void 0!==module.exports?module.exports=e:window.OwO=e}();
"use strict";!function(t){var e=function(e){var a={qzone:{name:"qzone",template:"<a class='#{css}' href='#{apiLink}?url=#{url}&title=#{title}' target='_blank'  title='#{hint}'><img align='top' src='#{icon}' alt='#{hint}' />#{text}</a>",default:!0,params:{apiLink:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey",icon:"https://heavenduke.github.io/hshare/icons/qzone.png",text:"QQ空间",hint:"分享到QQ空间"}},qq:{name:"qq",template:"<a class='#{css}' href='#{apiLink}?title=#{title}&url=#{url}' target='_blank' title='#{hint}'><img align='top' src='#{icon}' alt='#{hint}'/>#{text}</a>",default:!0,params:{apiLink:"http://connect.qq.com/widget/shareqq/index.html",icon:"https://heavenduke.github.io/hshare/icons/qq.png",text:"QQ好友",hint:"发送给QQ好友"}},wechat:{name:"wechat",template:"<a class='#{css}' href='#{apiLink}' target='_blank' title='#{hint}'><img align='top' src='#{icon}' alt='#{hint}' />#{text}</a>",default:!0,params:{apiLink:"https://cli.im/api/qrcode",icon:"https://heavenduke.github.io/hshare/icons/wechat.png",text:"微信",hint:"分享到微信"}},sinaweibo:{name:"sinaweibo",template:"<a class='#{css}' href='#{apiLink}?url=#{url}&title=#{title}' target='_blank' title='#{hint}'><img align='top' src='#{icon}' alt='#{hint}'/>#{text}</a>",default:!0,params:{apiLink:"http://v.t.sina.com.cn/share/share.php",icon:"https://heavenduke.github.io/hshare/icons/sina.png",text:"新浪微博",hint:"分享到新浪微博"}},douban:{name:"douban",template:"<a class='#{css}'  href='#{apiLink}?url=#{url}&title=#{title}' target='_blank'  title='#{hint}'><img align='top' src='#{icon}' alt='#{hint}' />#{text}</a>",default:!0,params:{apiLink:"http://www.douban.com/recommend/",icon:"https://heavenduke.github.io/hshare/icons/douban.png",text:"豆瓣",hint:"推荐到豆瓣"}},renren:{name:"renren",template:"<a class='#{css}' href='#{apiLink}?resourceUrl=#{url}&srcUrl=#{url}&title=#{title}' target='_blank' title='#{hint}'><img align='top' alt='#{hint}' src='#{icon}' />#{text}</a>",default:!1,params:{apiLink:"http://widget.renren.com/dialog/share",icon:"https://heavenduke.github.io/hshare/icons/renren.png",text:"人人网",hint:"分享到人人网"}},kaixin:{name:"kaixin",template:"<a class='#{css}' href='#{apiLink}?rtitle=#{title}&rurl=#{url}' target='_blank' title='#{hint}'><img align='top' alt='#{hint}' src='#{icon}' />#{text}</a>",default:!1,params:{apiLink:"http://www.kaixin001.com/repaste/share.php",icon:"https://heavenduke.github.io/hshare/icons/kaixin.png",text:"开心网",hint:"分享到开心网"}},pengyou:{name:"pengyou",template:"<a class='#{css}' href='#{apiLink}?to=pengyou&url=#{url}&title=#{title}' target='_blank'  title='#{hint}'><img align='top' src='#{icon}' alt='#{hint}' />#{text}</a>",default:!1,params:{apiLink:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey",icon:"https://heavenduke.github.io/hshare/icons/pengyou.png",text:"朋友网",hint:"分享到朋友网"}},tieba:{name:"tieba",template:"<a class='#{css}' href='#{apiLink}?url=#{url}&title=#{title}' target='_blank' title='#{hint}'><img align='top' alt='#{hint}' src='#{icon}'>#{text}</a>",default:!1,params:{apiLink:"http://tieba.baidu.com/f/commit/share/openShareApi",icon:"https://heavenduke.github.io/hshare/icons/tieba.png",text:"百度贴吧",hint:"分享到百度贴吧"}},renminweibo:{name:"renminweibo",template:"<a class='#{css}' href='#{apiLink}?url=#{url}&title=#{title}' target='_blank' title='#{hint}'><img align='top' alt='#{hint}' src='#{icon}'>#{text}</a>",default:!1,params:{apiLink:"http://t.people.com.cn/toshareinfo.action",icon:"https://heavenduke.github.io/hshare/icons/renminweibo.png",text:"人民微博",hint:"分享到人民微博"}},hexunweibo:{name:"hexunweibo",template:"<a class='#{css}' href='#{apiLink}?url#{url}&title=#{title}' target='_blank' title='#{hint}'><img align='top' alt='#{hint}' src='#{icon}'>#{text}</a>",default:!1,params:{apiLink:"http://t.hexun.com/channel/shareweb.aspx",icon:"https://heavenduke.github.io/hshare/icons/hexunweibo.png",text:"和讯微博",hint:"分享到和讯微博"}},tianya:{name:"tianya",template:"<a class='#{css}' href='#{apiLink}?action=send-html&shareTo=2&appkey=&url=#{url}&title=#{title}' target='_blank' title='#{hint}'><img align='top' alt='#{hint}' src='#{icon}'>#{text}</a>",default:!1,params:{apiLink:"http://open.tianya.cn/widget/send_for.php",icon:"https://heavenduke.github.io/hshare/icons/tianya.png",hint:"分享到天涯网",text:"天涯网"}},yixin:{name:"yixin",template:"<a class='#{css}' href='#{apiLink}?type=text&text=#{title}#{url}' target='_blank' title='#{hint}'><img align='top' src='#{icon}' alt='#{hint}'/>#{text}</a>",default:!1,params:{apiLink:"http://open.yixin.im/share",icon:"https://heavenduke.github.io/hshare/icons/yixin.png",text:"易信",hint:"分享到易信"}},club189:{name:"club189",template:"<a class='#{css}' href='#{apiLink}?title=#{title}&object_url=#{url}' target='_blank' title='#{hint}'><img align='top' src='#{icon}' alt='#{hint}'/>#{text}</a>",default:!1,params:{apiLink:"http://club.189.cn/openshare/sharepage",icon:"https://heavenduke.github.io/hshare/icons/club189.png",text:"翼友圈",hint:"分享到翼友圈"}},googleplus:{name:"googleplus",template:"<a class='#{css}' href='#{apiLink}?hl=zh-CN&url=#{url}' target='_blank' title='#{hint}'><img align='top' src='#{icon}' alt='#{hint}'/>#{text}</a>",default:!1,params:{apiLink:"https://plus.google.com/share",icon:"https://heavenduke.github.io/hshare/icons/googleplus.png",text:"Google+",hint:"分享到Google+"}},tumblr:{name:"tumblr",template:"<a class='#{css}' href='#{apiLink}?shareSource=legacy&title=#{tile}&url=#{url}' target='_blank' title='#{hint}'><img align='top' src='#{icon}' alt='#{hint}'/>#{text}</a>",default:!1,params:{apiLink:"https://www.tumblr.com/widgets/share/tool",icon:"https://heavenduke.github.io/hshare/icons/tumblr.png",text:"tumblr",hint:"分享到tumblr"}},hotmail:{name:"hotmail",template:"<a class='#{css}' href='#{apiLink}?subject=#{title}&body=#{title}#{link}&path=/mail/action/compose' target='_blank' title='#{hint}'><img align='top' src='#{icon}' alt='#{hint}'/>#{text}</a>",default:!1,params:{apiLink:"https://outlook.live.com/owa/",icon:"https://heavenduke.github.io/hshare/icons/hotmail.png",text:"hotmail邮箱",hint:"通过hotmail邮箱发送"}},reddit:{name:"reddit",template:"<a class='#{css}' href='#{apiLink}?url=#{url}&title=#{title}' target='_blank' title='#{hint}'><img align='top' alt='#{hint}' src='#{icon}'>#{text}</a>",default:!1,params:{apiLink:"https://www.reddit.com/submit",icon:"https://heavenduke.github.io/hshare/icons/reddit.png",text:"Reddit",hint:"分享到Reddit"}},ibaidu:{name:"ibaidu",template:"<a class='#{css}' href='#{apiLink}?t=#{title}&url=#{url}' target='_blank' title='#{hint}'><img align='top' src='#{icon}' alt='#{hint}'/>#{text}</a>",default:!1,params:{apiLink:"http://i.baidu.com/store/",icon:"https://heavenduke.github.io/hshare/icons/baidu.png",text:"iBaidu",hint:"分享到iBaidu"}},baiduhome:{name:"baiduhome",template:"<a class='#{css}' href='#{apiLink}?name=#{title}&url=#{url}&from=addtobaidu' target='_blank' title='#{hint}'><img align='top' src='#{icon}' alt='#{hint}'/>#{text}</a>",default:!1,params:{apiLink:"https://www.baidu.com/home/page/show/url",icon:"https://heavenduke.github.io/hshare/icons/baidu.png",text:"百度首页",hint:"添加到百度首页"}},linkedin:{name:"linkedin",template:"<a class='#{css}' href='#{apiLink}?mini=true&ro=true&armin=armin&title=#{title}&url=#{url}' target='_blank' title='#{hint}'><img align='top' src='#{icon}' alt='#{hint}'/>#{text}</a>",default:!1,params:{apiLink:"https://www.linkedin.com/shareArticle",icon:"https://heavenduke.github.io/hshare/icons/linkedin.png",text:"linkedin",hint:"分享到LinkedIn"}},twitter:{name:"twitter",template:"<a class='#{css}' href='#{apiLink}?text=#{title}#{url}' target='_blank' title='#{hint}'><img align='top' src='#{icon}' alt='#{hint}'/>#{text}</a>",default:!1,params:{apiLink:"https://twitter.com/intent/tweet",icon:"https://heavenduke.github.io/hshare/icons/twitter.png",text:"Twitter",hint:"分享到Twitter"}},facebook:{name:"facebook",template:"<a class='#{css}' href='#{apiLink}?t=#{title}&u=#{url}' target='_blank' title='#{hint}'><img align='top' src='#{icon}' alt='#{hint}'/>#{text}</a>",default:!1,params:{apiLink:"http://www.facebook.com/sharer.php",icon:"https://heavenduke.github.io/hshare/icons/facebook.png",text:"Facebook",hint:"分享到Facebook"}},feixin:{name:"feixin",template:"<a class='#{css}' href='#{apiLink}?title=#{title}&url=#{url}' target='_blank' title='#{hint}'><img align='top' src='#{icon}' alt='#{hint}'/>#{text}</a>",default:!1,params:{apiLink:"http://i.feixin.10086.cn/apps/share/share",icon:"https://heavenduke.github.io/hshare/icons/feixin.png",text:"飞信同窗",hint:"分享到飞信同窗"}},youdaocloud:{name:"youdaocloud",template:"<a class='#{css}' href='#{apiLink}?title=#{title}&url=#{url}' target='_blank' title='#{hint}'><img align='top' src='#{icon}' alt='#{hint}'/>#{text}</a>",default:!1,params:{apiLink:"http://note.youdao.com/memory/",icon:"https://heavenduke.github.io/hshare/icons/youdaocloud.png",text:"有道云笔记",hint:"分享到有道云笔记"}},qingbiji:{name:"qingbiji",template:"<a class='#{css}' href='#{apiLink}?title=#{title}&url=#{url}' target='_blank' title='#{hint}'><img align='top' src='#{icon}' alt='#{hint}'/>#{text}</a>",default:!1,params:{apiLink:"http://www.qingbiji.cn/shareToQingBiJi",icon:"https://heavenduke.github.io/hshare/icons/qingbiji.png",text:"轻笔记",hint:"分享到轻笔记"}},sdonote:{name:"sdonote",template:"<a class='#{css}' href='#{apiLink}?text=#{title}&url=#{url}' target='_blank' title='#{hint}'><img align='top' src='#{icon}' alt='#{hint}'/>#{text}</a>",default:!1,params:{apiLink:"http://note.sdo.com/tool/collect",icon:"https://heavenduke.github.io/hshare/icons/sdonote.png",text:"麦库记事",hint:"分享到麦库记事"}},xinhua:{name:"xinhua",template:"<a class='#{css}' href='#{apiLink}?title=#{title}&url=#{url}' target='_blank' title='#{hint}'><img align='top' src='#{icon}' alt='#{hint}'/>#{text}</a>",default:!1,params:{apiLink:"http://t.home.news.cn/share.jsp",icon:"https://heavenduke.github.io/hshare/icons/xinhua.png",text:"新华微博",hint:"分享到新华微博"}},isohu:{name:"isohu",template:"<a class='#{css}' href='#{apiLink}?title=#{title}&link=#{url}' target='_blank' title='#{hint}'><img align='top' src='#{icon}' alt='#{hint}'/>#{text}</a>",default:!1,params:{apiLink:"http://i.sohu.com/a/app/mblog/add.htm",icon:"https://heavenduke.github.io/hshare/icons/sohu.png",text:"我的搜狐",hint:"分享到我的搜狐"}},gmail:{name:"gmail",template:"<a class='#{css}' href='#{apiLink}?ui=2&view=cm&fs=1&tf=1&su=#{title}&body=#{title}#{url}' target='_blank' title='#{hint}'><img align='top' src='#{icon}' alt='#{hint}'/>#{text}</a>",default:!1,params:{apiLink:"https://mail.google.com/mail/",icon:"https://heavenduke.github.io/hshare/icons/gmail.png",text:"Gmail",hint:"通过Gmail发送"}},instapaper:{name:"instapaper",template:"<a class='#{css}' href='#{apiLink}?title=#{title}&url=#{url}' target='_blank' title='#{hint}'><img align='top' src='#{icon}' alt='#{hint}'/>#{text}</a>",default:!1,params:{apiLink:"https://www.instapaper.com/edit",icon:"https://heavenduke.github.io/hshare/icons/instapaper.png",text:"Instapaper",hint:"分享到Instapaper"}},pocket:{name:"pocket",template:"<a class='#{css}' href='#{apiLink}?title=#{title}&url=#{url}' target='_blank' title='#{hint}'><img align='top' src='#{icon}' alt='#{hint}'/>#{text}</a>",default:!1,params:{apiLink:"https://getpocket.com/edit.php",icon:"https://heavenduke.github.io/hshare/icons/pocket.png",text:"Pocket",hint:"分享到Pocket"}},netvibes:{name:"netvibes",template:"<a class='#{css}' href='#{apiLink}?share=true&title=#{title}&url=#{url}' target='_blank' title='#{hint}'><img align='top' src='#{icon}' alt='#{hint}'/>#{text}</a>",default:!1,params:{apiLink:"http://www.netvibes.com/dashboard/1",icon:"https://heavenduke.github.io/hshare/icons/netvibes.png",text:"Netvibes",hint:"分享到Netvibes"}},buffer:{name:"buffer",template:"<a class='#{css}' href='#{apiLink}?text=#{title}#{url}&url=#{url}' target='_blank' title=#{hint}'><img align='top' src='#{icon}' alt='#{hint}'/>#{text}</a>",default:!1,params:{apiLink:"https://buffer.com/add",icon:"https://heavenduke.github.io/hshare/icons/buffer.png",text:"buffer",hint:"'分享到Buffer"}},hootsuite:{name:"hootsuite",template:"<a class='#{css}' href='?title=#{title}&url=#{url}' target='_blank' title='#{hint}'><img align='top' src='#{icon}' alt='#{hint}'/>#{text}</a>",default:!1,params:{apiLink:"https://hootsuite.com/hootlet/social-share",icon:"https://heavenduke.github.io/hshare/icons/hootsuite.png",text:"hootsuite",hint:"分享到HootSuite"}},digg:{name:"digg",template:"<a class='#{css}' href='#{apiLink}?phase=2&title=#{title}&url=#{url}' target='_blank' title='#{hint}'><img align='top' src='#{icon}' alt='#{hint}'/>#{text}</a>",default:!1,params:{apiLink:"http://digg.com/submit",icon:"https://heavenduke.github.io/hshare/icons/digg.png",text:"digg",hint:"分享到digg"}},chouti:{name:"chouti",template:"<a class='#{css}' href='#{apiLink}?title=#{title}&newsURL=#{url}' target='_blank' title='#{hint}'><img align='top' src='#{icon}' alt='#{hint}'/>#{text}</a>",default:!1,params:{apiLink:"http://dig.chouti.com/digg.action",icon:"https://heavenduke.github.io/hshare/icons/chouti.png",text:"抽屉网",hint:"分享到抽屉网"}}},i={copyLink:{template:"<a class='#{css}' title='复制链接'><img align='top' alt='复制链接' src='#{icon}'>#{text}</a>",params:{icon:"https://heavenduke.github.io/hshare/icons/copylink.png",text:"复制链接"}},print:{template:"<a class='#{css}' title='打印页面'><img align='top' alt='打印页面' src='#{icon}'>#{text}</a>",params:{icon:"https://heavenduke.github.io/hshare/icons/print.png",text:"打印"},callback:function(){window.print()}},bookmark:{template:"<a class='#{css}' title='添加到收藏夹'><img align='top' alt='添加到收藏夹' src='#{icon}'>#{text}</a>",params:{icon:"https://heavenduke.github.io/hshare/icons/bookmark.png",text:"收藏夹"},callback:function(){alert("请按Ctrl + D以将本页面添加至收藏夹")}},more:{template:"<a class='#{css}' title='更多'><img align='top' alt='更多' src='#{icon}'></a>",params:{icon:"https://heavenduke.github.io/hshare/icons/more.png"}},stat:{template:"<div class='#{css} hshare-stat-container'>#{stat}</div>",params:{stat:0}}},n=["small","medium","large"],s={size:"medium",copyLink:!0,print:!1,bookmark:!1,more:!0,renderText:!1,platforms:[],extended:[]},l=function(e){var a=e.template||"",i=e.params||{};for(var n in i){var s=new RegExp("#{"+n+"}","g");a=a.replace(s,i[n])}var l=t(a);return e.callback instanceof Function&&l.click(e.callback),l},r=function(t){return t.params.url=t.params.url?t.params.url:v,t.params.title=t.params.title?t.params.title:w,t.params.size=y,t.params.text=1==u.renderText?t.params.text:"",t.params.css=t.params.css?t.params.css:"hshare hshare-"+t.params.size+(1==u.renderText?" hshare-text":""),l(t)},h=function(t){return a.hasOwnProperty(t.name)?r(t):l(t)},o=function(){var e=t("<div class='hshare-more-container'></div>"),a=t("<div class='hshare-more-header'><div class='hshare-more-title'>更多平台</div><div class='hshare-more-close'>×</div></div>"),i=t("<div class='hshare-more-body'></div>");e.append(a).append(i);var n=t("<table></table>");i.append(n);var s,l,r=[];for(var o in u.extended){var p=u.extended[o];if(r.length>=2){s=t("<tr></tr>");for(var c=0;c<r.length;c++){l=t("<td class='hshare-more-item'></td>");var m=h(r[c]);l.append(m);var g=r[c].name;u.stat instanceof Object&&m.on("click",function(){t.post(u.stat.updateUrl,{platform:g,url:L},function(){_.html(parseInt(_.text().trim())+1)},"json")}),s.append(l)}n.append(s),r.splice(0,r.length)}r.push(p)}for(s=t("<tr></tr>"),c=0;c<r.length;c++){l=t("<td class='hshare-more-item'></td>");var m=h(r[c]);l.append(m);var g=r[c].name;u.stat instanceof Object&&m.on("click",function(){t.post(u.stat.updateUrl,{platform:g},function(){_.html(parseInt(_.text().trim())+1)},"json")}),s.append(l)}return n.append(s),e},p=function(t,e,a,i,n,s){var l={};return l.x=t+a>n?t-a:t,l.y=e+i>s?e-i:e,l},c=function(t,e,a,i,n,s){return t>=a&&e>=i&&t<=a+n&&e<=i+s},m=function(t,e){var a=document.getElementsByTagName("head")[0],i=document.createElement("script");i.type="text/javascript",i.src=t,i.onreadystatechange=e,i.onload=e,a.appendChild(i)},u=e?t.extend(!0,{},e):t.extend(!0,{},s);if(u.size=1==u.renderText?"small":u.size,u.platforms=[],e&&e.platforms instanceof Array)for(var g=0;g<e.platforms.length;g++){var d=e.platforms[g];u.platforms.push(t.extend({},d.name&&a[d.name]?a[d.name]:{},d))}else for(var k in a)a[k].default&&u.platforms.push(new Object(a[k]));if(u.extended=[],e&&1==u.more&&e.extended instanceof Array)for(g=0;g<e.extended.length;g++)d=e.extended[g],u.extended.push(t.extend({},d.name&&a[d.name]?a[d.name]:{},d));else if(1==u.more)for(var k in a){var f=!1,b=a[k];for(var x in u.platforms)if(u.platforms[x].name==b.name){f=!0;break}0==f&&u.extended.push(new Object(b))}0==u.extended.length&&(u.more=!1);var v=encodeURIComponent(location.href),L=location.href.replace(location.search,""),w=encodeURIComponent(document.title),y=-1!=t.inArray(u.size,n)?u.size:"medium",_=null;return this.each(function(){var e=t(this),a=u.platforms;u.stat instanceof Object&&(_=r(i.stat),t.get(u.stat.loadUrl,{url:L},function(t){_.html(t.stat)},"json"));for(var n=0;n<a.length;n++){var s=h(a[n]),l=a[n].name;u.stat instanceof Object&&s.on("click",function(){t.post(u.stat.updateUrl,{platform:l,url:L},function(){_.html(parseInt(_.text().trim())+1)},"json")}),e.append(s)}if(1==u.copyLink){var g=r(i.copyLink);m("https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.5.16/clipboard.min.js",function(){new Clipboard(g[0],{text:function(t){return location.href}}).on("success",function(t){alert("已复制链接到剪贴板")})}),e.append(g)}if(1==u.print){var d=r(i.print);e.append(d)}if(1==u.bookmark){var k=r(i.bookmark);e.append(k)}var f=function(t){var e=t.pageX,a=t.pageY,i=v.offset().left,n=v.offset().top,s=v.width(),l=v.height();c(e,a,i,n,s,l)||v.css("display","none")},b=function(e){if("none"==v.css("display")){var a=e.pageX,i=e.pageY,n=v.width(),s=v.height(),l=t(window).width(),r=t(window).height(),h=p(a,i,n,s,l,r);v.attr("style","left: "+h.x+"px; top: "+h.y+"px;"),v.css("display","block")}};if(1==u.more){var x=r(i.more);u.renderText=!0,y="small";var v=o();e.append(x),t("body").append(v),x.hover(b,f),v.on("mouseout mouseleave",f)}u.stat instanceof Object&&e.append(_)})};t.fn.extend({hshare:e})}(jQuery);
"use strict";!function(){$.richText=function(e){["#","##","###","####","#####"].forEach(function(n){$(".markdown-h"+n.length).click(function(){for(var a=e.getSelections(),o=0;o<a.length;o++)a[o].length,a[o]=n+" "+a[o];e.replaceSelections(a)})}),$(".markdown-bold").click(function(){for(var n=e.getSelections(),a=0;a<n.length;a++)n[a]="**"+n[a]+"**";e.replaceSelections(n)}),$(".markdown-italic").click(function(){for(var n=e.getSelections(),a=0;a<n.length;a++)n[a]="*"+n[a]+"*";e.replaceSelections(n)}),$(".markdown-bulleted-list").click(function(){for(var n=e.getSelections(),a=0;a<n.length;a++)n[a]="* "+n[a];e.replaceSelections(n)}),$(".markdown-numbered-list").click(function(){for(var n=e.getSelections(),a=0;a<n.length;a++)n[a]="1. "+n[a];e.replaceSelections(n)}),$(".markdown-link").click(function(){$("#markdown-new-link").modal("show")}),$(".markdown-image").click(function(){$("#markdown-new-image").modal("show")}),$(".save-markdown-link").click(function(){var n=$("#markdown-new-link").find("input[name='markdown-link-name']").val(),a=$("#markdown-new-link").find("input[name='markdown-link']").val();return e.replaceSelection("["+n+"]("+a+")"),!0}),$(".save-markdown-image").click(function(){var n=$("#markdown-new-image").find("input[name='markdown-image-name']").val(),a=$("#markdown-new-image").find("input[name='markdown-image-link']").val();return e.replaceSelection("!["+n+"]("+a+")"),!0}),$(".markdown-code-inline").click(function(){for(var n=e.getSelections(),a=0;a<n.length;a++)n[a]="```"+n[a]+"```";e.replaceSelections(n)}),$(".markdown-code").click(function(){for(var n=$(".markdown-code-entry").attr("value")?$(".markdown-code-entry").attr("value"):"",a=e.getSelections(),o=0;o<a.length;o++)a[o]="```"+n+"\n"+a[o]+"\n```";e.replaceSelections(a)}),$(".markdown-latex-inline").click(function(){for(var n=e.getSelections(),a=0;a<n.length;a++)n[a]="$"+n[a]+"$";e.replaceSelections(n)}),$(".markdown-latex").click(function(){for(var n=e.getSelections(),a=0;a<n.length;a++)n[a]="$$"+n[a]+"$$";e.replaceSelections(n)}),$(".markdown-html").click(function(){for(var n="<html>\n#{content}\n</html>",a=e.getSelections(),o=0;o<a.length;o++)a[o]=n.replace(/#\{content}/,a[o]);e.replaceSelections(a)}),$(".markdown-code-language").click(function(){var e=$(this).attr("value");$(".markdown-code-entry").html("<i class='fa fa-code'></i>　"+e),$(".markdown-code-entry").attr("value",e)}),$("#image_creation_uploader").fileupload({url:"/images?_method=POST",dataType:"json",done:function(e,n){$.each(n.result.files,function(e,n){$("#image-preview-container").css("display","block"),$("#image-previewer").attr("src","/"+n.url),$("#markdown-new-image").find("input[name='markdown-image-link']").val("/"+n.url)})},progressall:function(e,n){var a=parseInt(n.loaded/n.total*100,10);$("#create_upload_progress .progress-bar").css("width",a+"%")}})}}();
"use strict";!function(){MathJax.Hub.Config({tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}});var e=new marked.Renderer;e.image=function(e,t,n){var a='<img class="md-image" style="max-height: 400px; max-width: 100%;" src="'+e+'" alt="'+n+'"';return t&&(a+=' title="'+t+'"'),a+=this.options.xhtml?"/>":">"};var t=function(){$("img.md-image").each(function(){$(this).parent().addClass("text-center")})},n=function(){for(var e=$("img.guest_comment"),t=0;t<e.length;t++){var n=$(e[t]),a=new Identicon(md5(n.attr("hash"))).toString();n.attr("src","data:image/png;base64,"+a),n.removeAttr("hash")}},a=function(){var a=$("#article-content");MathJax.Hub.Queue(["Typeset",MathJax.Hub],function(){var n=marked(a.html(),{renderer:e});a.html(n),$("pre code").each(function(){hljs.highlightBlock(this)}),t()});for(var i=$("div[class$='OwO']"),o=0;o<i.length;o++){var c=$(i[o]).attr("comment_id");c?new OwO({logo:"OωO表情",container:i[o],target:document.getElementById(c+"_comment_reply"),position:"down",api:"/data/OwO.json",width:"100%",maxHeight:"250px"}):new OwO({logo:"OωO表情",container:i[o],target:document.getElementById("comment_input"),position:"down",api:"/data/OwO.json",width:"100%",maxHeight:"250px"})}$("a[id$='_reply_entry']").on("click",function(){var e=$(this).attr("id"),t={"回复":"收起","收起":"回复"};$(this).text(t[$(this).text().trim()]);var n=e.substring(0,e.indexOf("_reply_entry"));$("#"+n+"_reply_container").slideToggle()}),n(),r()},r=function(){$("#hshare").hshare({size:"large",renderText:!1,platforms:[{name:"qzone"},{name:"qq"},{name:"douban"},{name:"renren"},{name:"sinaweibo"},{name:"wechat"}],stat:{loadUrl:"/shares",updateUrl:"/shares"}})},i=function(){var n=$("#article_content_input"),a=CodeMirror.fromTextArea(n[0],{value:n.val(),lineNumbers:!0,mode:"gfm",matchBrackets:!0,lineWrapping:!0,tabSize:4,theme:"monokai",keyMap:"sublime",extraKeys:{Enter:"newlineAndIndentContinueMarkdownList"},autoCloseBrackets:!0,smartIndent:!0,showCursorWhenSelecting:!0});$("#article_previewer_entry").on("click",function(){var r=($("#article_previewer"),$("#article_previewer_content"));a.save();var i=n.val();r.html(i),MathJax.Hub.Queue(["Typeset",MathJax.Hub],function(){i=marked(r.html(),{renderer:e}),r.html(i),r.children("pre").each(function(){hljs.highlightBlock(this)}),t()})}),$.richText(a)};$(document).on("ready",function(){null!=window.location.href.match(/\/articles\/\w+\/edit/)?i():null!=window.location.href.match(/\/articles\/new/)?i():null!=window.location.href.match(/\/articles\/\w+/)&&a()})}();