//
   Created by heavenduke on 16-8-13.

extends ../layout/layout

block specified_ref
    script(type="text/javascript" src="/marked/marked.js")
    link(rel="stylesheet" type="text/css" href="/photo.css")
    link(rel="stylesheet" type="text/css" href="/theme.css")
    link(rel="stylesheet" type="text/css" href="/index.css")
    link(rel="stylesheet" type="text/css" href="/AdminLTE/css/skins/_all-skins.css")
    link(rel="stylesheet" type="text/css" href="/AdminLTE/css/AdminLTE.min.css")

block content
    .container
        .row.photo
            h4.pull-left 照片列表
            if current_user != null
                a.button.button-primary.button-pill.pull-right(href="#" data-toggle="modal" data-target="#new_photo_modal") 上传照片
        .divider
        .row
            if photos.length == 0
                h1.text-center 主人很懒
                h1.text-center 还没有上传任何照片_(:з」∠)_
            - var col1 = []
            - var col2 = []
            - var col3 = []
            - for(var i = 0; i < photos.length; i+=3)
                - col1.push(photos[i])
                if(i + 1 < photos.length)
                    - col2.push(photos[i + 1])
                if(i + 2 < photos.length)
                    - col3.push(photos[i + 2])
            .col-lg-4.col-md-6.col-sm-6.col-xs-12
                - for photo in col1
                    .post
                        .user-block
                            span.username(style="margin-left: 0px;")= photo.title
                            a.pull-right.btn.btn-box-tool.delete-entry(href="/photos/" + photo._id + "?_method=delete")
                                i.fa.fa-times
                            span.description(style="margin-left: 0px;")= photo.location + "　" + photo.created_at.format("yyyy年MM月dd日")
                        .row.margin
                            img.img-responsive(src=Photo.get_thumb_image("/" + photo.path), alt='Photo' style="border-radius: 5px;")
            .col-lg-4.col-md-6.col-sm-6.col-xs-12
                - for photo in col2
                    .post
                        .user-block
                            span.username(style="margin-left: 0px;")= photo.title
                            a.pull-right.btn.btn-box-tool.delete-entry(href="/photos/" + photo._id + "?_method=delete")
                                i.fa.fa-times
                            span.description(style="margin-left: 0px;")= photo.location + "　" + photo.created_at.format("yyyy年MM月dd日")
                        .row.margin
                            img.img-responsive(src=Photo.get_thumb_image("/" + photo.path), alt='Photo' style="border-radius: 5px;")
            .col-lg-4.col-md-6.col-sm-6.col-xs-12
                - for photo in col3
                    .post
                        .user-block
                            span.username(style="margin-left: 0px;")= photo.title
                            a.pull-right.btn.btn-box-tool.delete-entry(href="/photos/" + photo._id + "?_method=delete")
                                i.fa.fa-times
                            span.description(style="margin-left: 0px;")= photo.location + "　" + photo.created_at.format("yyyy年MM月dd日")
                        .row.margin
                            img.img-responsive(src=Photo.get_thumb_image("/" + photo.path), alt='Photo' style="border-radius: 5px;")
    include ./new
