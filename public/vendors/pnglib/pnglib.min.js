/**
 * Created by Obscurity on 2016/7/15.
 */

(function(){function b(e,h){for(var g=2;g<arguments.length;g++){for(var f=0;f<arguments[g].length;f++){e[h++]=arguments[g].charAt(f)}}}function a(e){return String.fromCharCode((e>>8)&255,e&255)}function d(e){return String.fromCharCode((e>>24)&255,(e>>16)&255,(e>>8)&255,e&255)}function c(e){return String.fromCharCode(e&255,(e>>8)&255)}window.PNGlib=function(e,o,g){this.width=e;this.height=o;this.depth=g;this.pix_size=o*(e+1);this.data_size=2+this.pix_size+5*Math.floor((65534+this.pix_size)/65535)+4;this.ihdr_offs=0;this.ihdr_size=4+4+13+4;this.plte_offs=this.ihdr_offs+this.ihdr_size;this.plte_size=4+4+3*g+4;this.trns_offs=this.plte_offs+this.plte_size;this.trns_size=4+4+g+4;this.idat_offs=this.trns_offs+this.trns_size;this.idat_size=4+4+this.data_size+4;this.iend_offs=this.idat_offs+this.idat_size;this.iend_size=4+4+4;this.buffer_size=this.iend_offs+this.iend_size;this.buffer=new Array();this.palette=new Object();this.pindex=0;var k=new Array();for(var h=0;h<this.buffer_size;h++){this.buffer[h]="\x00"}b(this.buffer,this.ihdr_offs,d(this.ihdr_size-12),"IHDR",d(e),d(o),"\x08\x03");b(this.buffer,this.plte_offs,d(this.plte_size-12),"PLTE");b(this.buffer,this.trns_offs,d(this.trns_size-12),"tRNS");b(this.buffer,this.idat_offs,d(this.idat_size-12),"IDAT");b(this.buffer,this.iend_offs,d(this.iend_size-12),"IEND");var l=((8+(7<<4))<<8)|(3<<6);l+=31-(l%31);b(this.buffer,this.idat_offs+8,a(l));for(var h=0;(h<<16)-1<this.pix_size;h++){var p,n;if(h+65535<this.pix_size){p=65535;n="\x00"}else{p=this.pix_size-(h<<16)-h;n="\x01"}b(this.buffer,this.idat_offs+8+2+(h<<16)+(h<<2),n,c(p),c(~p))}for(var h=0;h<256;h++){var m=h;for(var f=0;f<8;f++){if(m&1){m=-306674912^((m>>1)&2147483647)}else{m=(m>>1)&2147483647}}k[h]=m}this.index=function(q,t){var s=t*(this.width+1)+q+1;var r=this.idat_offs+8+2+5*Math.floor((s/65535)+1)+s;return r};this.color=function(t,r,i,s){s=s>=0?s:255;var q=(((((s<<8)|t)<<8)|r)<<8)|i;if(typeof this.palette[q]=="undefined"){if(this.pindex==this.depth){return"\x00"}var j=this.plte_offs+8+3*this.pindex;this.buffer[j+0]=String.fromCharCode(t);this.buffer[j+1]=String.fromCharCode(r);this.buffer[j+2]=String.fromCharCode(i);this.buffer[this.trns_offs+8+this.pindex]=String.fromCharCode(s);this.palette[q]=String.fromCharCode(this.pindex++)}return this.palette[q]};this.getBase64=function(){var C=this.getDump();if((typeof window.btoa!=="undefined")&&(window.btoa!==null)){return window.btoa(C)}var q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var x,v,u,B,A,z,y;var t=C.length;var w=0;var j="";do{x=C.charCodeAt(w);B=x>>2;v=C.charCodeAt(w+1);A=((x&3)<<4)|(v>>4);u=C.charCodeAt(w+2);if(t<w+2){z=64}else{z=((v&15)<<2)|(u>>6)}if(t<w+3){y=64}else{y=u&63}j+=q.charAt(B)+q.charAt(A)+q.charAt(z)+q.charAt(y)}while((w+=3)<t);return j};this.getDump=function(){var j=65521;var s=5552;var r=1;var q=0;var v=s;for(var u=0;u<this.height;u++){for(var i=-1;i<this.width;i++){r+=this.buffer[this.index(i,u)].charCodeAt(0);q+=r;if((v-=1)==0){r%=j;q%=j;v=s}}}r%=j;q%=j;b(this.buffer,this.idat_offs+this.idat_size-8,d((q<<16)|r));function t(A,z,x){var y=-1;for(var w=4;w<x-4;w+=1){y=k[(y^A[z+w].charCodeAt(0))&255]^((y>>8)&16777215)}b(A,z+x-4,d(y^-1))}t(this.buffer,this.ihdr_offs,this.ihdr_size);t(this.buffer,this.plte_offs,this.plte_size);t(this.buffer,this.trns_offs,this.trns_size);t(this.buffer,this.idat_offs,this.idat_size);t(this.buffer,this.iend_offs,this.iend_size);return"\211PNG\r\n\032\n"+this.buffer.join("")}}})();